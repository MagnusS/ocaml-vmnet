<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lwt_vmnet (vmnet.lwt.Lwt_vmnet)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">vmnet.lwt</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Lwt_vmnet</span></h1></header><p>Lwt async interface to MacOS X userlevel network bridging.</p><div class="spec type" id="type-mode"><a href="#type-mode" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>mode</code><code><span class="keyword"> = </span><a href="../../vmnet/Vmnet/index.html#type-mode">Vmnet.mode</a></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-mode.Host_mode" class="anchored"><td class="def constructor"><a href="#type-mode.Host_mode" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Host_mode</span></code></td></tr><tr id="type-mode.Shared_mode" class="anchored"><td class="def constructor"><a href="#type-mode.Shared_mode" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Shared_mode</span></code></td></tr></table><code></code></div><div class="doc"><p><code class="code">mode</code> controls the level of sharing exposed to the vmnet interface.</p><ul><li><a href="index.html#type-mode.Host_mode">Host_mode</a> lets the guest network interface communicate with other
guest network interfaces in the host mode and to the native host.</li><li><a href="index.html#type-mode.Shared_mode">Shared_mode</a> lets the guest network interface reach the Internet
using a network address translator.</li></ul><p>Note that in MacOS X Yosemite, <a href="index.html#type-mode.Host_mode">Host_mode</a> also provides a NAT to the
guest, but with the subnet and DNS options not set (so it has no way
to communicate externally but can still retrieve host-local network
configuration via DHCP).</p></div></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><div class="spec val" id="val-mode_of_sexp"><a href="#val-mode_of_sexp" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>mode_of_sexp : Sexplib.Sexp.t <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-mode">mode</a></code></div><div class="doc"></div></div><div class="spec val" id="val-sexp_of_mode"><a href="#val-sexp_of_mode" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>sexp_of_mode : <a href="index.html#type-mode">mode</a> <span class="keyword">&#8209;&gt;</span> Sexplib.Sexp.t</code></div><div class="doc"></div></div></details></div><div class="spec type" id="type-error"><a href="#type-error" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>error</code><code><span class="keyword"> = </span><a href="../../vmnet/Vmnet/index.html#type-error">Vmnet.error</a></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-error.Failure" class="anchored"><td class="def constructor"><a href="#type-error.Failure" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Failure</span></code></td></tr><tr id="type-error.Mem_failure" class="anchored"><td class="def constructor"><a href="#type-error.Mem_failure" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Mem_failure</span></code></td></tr><tr id="type-error.Invalid_argument" class="anchored"><td class="def constructor"><a href="#type-error.Invalid_argument" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Invalid_argument</span></code></td></tr><tr id="type-error.Setup_incomplete" class="anchored"><td class="def constructor"><a href="#type-error.Setup_incomplete" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Setup_incomplete</span></code></td></tr><tr id="type-error.Invalid_access" class="anchored"><td class="def constructor"><a href="#type-error.Invalid_access" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Invalid_access</span></code></td></tr><tr id="type-error.Packet_too_big" class="anchored"><td class="def constructor"><a href="#type-error.Packet_too_big" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Packet_too_big</span></code></td></tr><tr id="type-error.Buffer_exhausted" class="anchored"><td class="def constructor"><a href="#type-error.Buffer_exhausted" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Buffer_exhausted</span></code></td></tr><tr id="type-error.Too_many_packets" class="anchored"><td class="def constructor"><a href="#type-error.Too_many_packets" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Too_many_packets</span></code></td></tr><tr id="type-error.Unknown" class="anchored"><td class="def constructor"><a href="#type-error.Unknown" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Unknown</span><span class="keyword"> of </span>int</code></td></tr></table><code></code></div><div class="doc"><p><code class="code">error</code> represents hard failures from the underlying vmnet functions.</p></div></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><div class="spec val" id="val-error_of_sexp"><a href="#val-error_of_sexp" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>error_of_sexp : Sexplib.Sexp.t <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-error">error</a></code></div><div class="doc"></div></div><div class="spec val" id="val-sexp_of_error"><a href="#val-sexp_of_error" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>sexp_of_error : <a href="index.html#type-error">error</a> <span class="keyword">&#8209;&gt;</span> Sexplib.Sexp.t</code></div><div class="doc"></div></div></details></div><div class="spec exception" id="exception-Error"><a href="#exception-Error" class="anchor"></a><div class="def exception"><code><span class="keyword">exception </span></code><code><span class="exception">Error</span><span class="keyword"> of </span><a href="index.html#type-error">error</a></code></div><div class="doc"><p><code class="code">Error</code> can be raised by vmnet functions when hard errors are encountered.</p></div></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary></details></div><div class="spec exception" id="exception-Permission_denied"><a href="#exception-Permission_denied" class="anchor"></a><div class="def exception"><code><span class="keyword">exception </span></code><code><span class="exception">Permission_denied</span></code></div><div class="doc"><p><code class="code">Permission_denied</code> can be raised if the process needs root privileges
(or the vmnet capability)</p></div></div><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>t</code><code></code><code></code></div><div class="doc"><p><code class="code">t</code> is the internal state of one vmnet interface, including Lwt-specific
waiters and threads.</p></div></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><div class="spec val" id="val-sexp_of_t"><a href="#val-sexp_of_t" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>sexp_of_t : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> Sexplib.Sexp.t</code></div><div class="doc"></div></div></details></div><div class="spec val" id="val-mac"><a href="#val-mac" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>mac : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> Macaddr.t</code></div><div class="doc"><p><code class="code">mac t</code> will return the MAC address bound to the guest network interface.</p></div></div><div class="spec val" id="val-max_packet_size"><a href="#val-max_packet_size" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>max_packet_size : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p><code class="code">max_packet_size t</code> will return the maximum allowed packet buffer that can
be passed to <a href="index.html#val-write">write</a>. Exceeding this will raise <a href="index.html#type-error.Packet_too_big">Packet_too_big</a> from
<a href="index.html#val-write">write</a>.</p></div></div><div class="spec val" id="val-init"><a href="#val-init" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>init : ?&#8288;mode:<a href="index.html#type-mode">mode</a> <span class="keyword">&#8209;&gt;</span> unit <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> Lwt.t</code></div><div class="doc"><p><code class="code">init ?mode</code> will initialise a fresh vmnet interface, defaulting to
<a href="index.html#type-mode.Shared_mode">Shared_mode</a> for the output. Raises <a href="index.html#exception-Error">Error</a> if something goes wrong.</p></div></div><div class="spec val" id="val-read"><a href="#val-read" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>read : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> Cstruct.t <span class="keyword">&#8209;&gt;</span> Cstruct.t Lwt.t</code></div><div class="doc"><p><code class="code">read t buf</code> will read a network packet into the <code class="code">buf</code><span class="xref-unresolved" title="unresolved reference to &quot;Cstruct.t&quot;">Cstruct.t</span> and
return a fresh subview that represents the packet with the correct length
and offset. It blocks until a packet is available.</p></div></div><div class="spec val" id="val-write"><a href="#val-write" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>write : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> Cstruct.t <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code></div><div class="doc"><p><code class="code">write t buf</code> will transmit a network packet contained in <code class="code">buf</code>. This will
normally not block, but the vmnet interface isnt clear on whether this might
happen.</p></div></div></body></html>